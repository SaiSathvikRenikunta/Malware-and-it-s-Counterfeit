import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.regex.*;
import java.util.*;

public class MalwareDetails{
	JFrame frame;
	JMenuBar menubar;
	JMenu Navi,about,lkfl;
	JMenuItem miHome,miabtproject,miabtstudent,miMotif,miNimbus,miCross;
	JLabel lblMal,lblcode,lblstyle,lbleffect,lblcounter;
	JComboBox<String> jcMal;
	JTextField tfcode;
	JTextArea tastyle,taeffect,tacounter;
	JPanel p1,p2,p3,p4;
	DBAccess db;
	public MalwareDetails(){
		super();
	}
	public MalwareDetails(DBAccess db){
		this.db = db;
		initializeComponents();
		registerListeners();
		addComponentsToFrame();
		frame.setBackground(Color.lightGray);
		frame.setLayout(new GridLayout(6,1)); 
		frame.setSize(450,400);
		frame.setVisible(true);
		frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
	}
	public void initializeComponents(){
		frame = new JFrame("Malware Details");
		
		menubar = new JMenuBar();
		
		Navi = new JMenu("Navigations");
		miHome = new JMenuItem("Home");
		
		about = new JMenu("About");
		miabtproject = new JMenuItem("About Project");
		miabtstudent = new JMenuItem("About Student");
		
		lkfl = new JMenu("LAF");
		miMotif = new JMenuItem("Motif");
		miNimbus = new JMenuItem("Nimbus");
		miCross = new JMenuItem("Cross Platform");
		
		lblMal = new JLabel("Malware: ");
		jcMal = new JComboBox<>(db.getMalwareNames());
		lblcode = new JLabel("Mal_id: ");
		tfcode = new JTextField(8);
		
		lblstyle = new JLabel("Style of Attack: ");
		tastyle = new JTextArea(2,25);
		tastyle.setEditable(false);
		
		lbleffect = new JLabel("Effect: ");
		taeffect = new JTextArea(2,25);
		taeffect.setEditable(false);
		
		lblcounter = new JLabel("Counterfeit: ");
		tacounter = new JTextArea(1,25);
		tacounter.setEditable(false);
		
		p1 = new JPanel();
		p2 = new JPanel();
		p3 = new JPanel();
		p4 = new JPanel();
	}
	public void registerListeners(){
		jcMal.addActionListener (new ActionListener () {
			public void actionPerformed(ActionEvent e) {
				String str = jcMal.getItemAt(jcMal.getSelectedIndex());
				Vector v1 = db.getOfMalware(str);
				Vector v2 = db.getOfCause((String)v1.get(0));
				Vector v3 = db.getOfCounterfeit((String)v1.get(0));
				String s1 = new String();
				String s2 = new String();
				tfcode.setText((String)v1.get(0));
				tastyle.setText((String)v1.get(2));
				for(Object s:v2)
					s1 = s1+(String)s+"\n";
				taeffect.setText(s1);
				for(Object s:v3)
					s2 = s2+(String)s+"\n";
				tacounter.setText(s2);
			}
		});
		miHome.addActionListener (new ActionListener () {
			public void actionPerformed(ActionEvent e) {
				frame.dispose();
				new Home(db);
			}
		});
		miabtproject.addActionListener (new ActionListener () {
			public void actionPerformed(ActionEvent e) {
				JOptionPane.showMessageDialog(frame, "Project Name: Malware Counterfeit\nDetails: This Project describes about the differenct types \nof software malwares present and their effects caused by \ntheir their presence amd ways to counterfeit it.","INFORMATION", JOptionPane.INFORMATION_MESSAGE);
			}
		});
		miabtstudent.addActionListener (new ActionListener () {
			public void actionPerformed(ActionEvent e) {
				JOptionPane.showMessageDialog(frame, "Name of Student: R. Sai Sathvik\nRoll number: 1602-20-737-035\nMain purpose of project: To implement a 1-Tier Architecture java application","INFORMATION", JOptionPane.INFORMATION_MESSAGE);
			}
		});
		miMotif.addActionListener(new ActionListener()
		{
			public void actionPerformed(ActionEvent evt) 
			{
				try{
					UIManager.setLookAndFeel("com.sun.java.swing.plaf.motif.MotifLookAndFeel");
					SwingUtilities.updateComponentTreeUI(frame);
				}
				catch(ClassNotFoundException|InstantiationException|IllegalAccessException|UnsupportedLookAndFeelException ex)
				{}
			}
		});
	
		miNimbus.addActionListener(new ActionListener()
		{
			public void actionPerformed(ActionEvent evt) 
			{
				try{
					UIManager.setLookAndFeel("javax.swing.plaf.nimbus.NimbusLookAndFeel");
					SwingUtilities.updateComponentTreeUI(frame);
				}
				catch(ClassNotFoundException|InstantiationException|IllegalAccessException|UnsupportedLookAndFeelException ex)
				{}
			}
		});
	
		miCross.addActionListener(new ActionListener()
		{
			public void actionPerformed(ActionEvent evt) 
			{
				try{
					UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());
					SwingUtilities.updateComponentTreeUI(frame);
				}
				catch(ClassNotFoundException|InstantiationException|IllegalAccessException|UnsupportedLookAndFeelException ex)
				{}
			}
		});
		frame.addWindowListener(new WindowAdapter() {
			public void windowClosing(WindowEvent e) {
				if(db.closeConnection()){
					JOptionPane.showMessageDialog(frame, "You are Exiting and \n Connection is closed successfully.","INFORMATION", JOptionPane.INFORMATION_MESSAGE);;
				}
				System.exit(0);
			}
		});
	}
	public void addComponentsToFrame(){
		Navi.add(miHome);
		
		about.add(miabtproject);
		about.add(miabtstudent);
		
		lkfl.add(miCross);
		lkfl.add(miMotif);
		lkfl.add(miNimbus);
		
		menubar.add(Navi);
		menubar.add(about);
		menubar.add(lkfl);
		frame.setJMenuBar(menubar);
		
		tfcode.setEditable(false);
		tacounter.setEditable(false);
		taeffect.setEditable(false);
		tastyle.setEditable(false);
		
		p1.add(lblMal);
		p1.add(jcMal); 
		p1.add(lblcode);
		p1.add(tfcode);
		
		p2.add(lblstyle);
		p2.add(tastyle); 
		
		p3.add(lbleffect);
		p3.add(taeffect);
		
		p4.add(lblcounter);
		p4.add(tacounter);
		
		frame.add(p1);
		frame.add(p2);
		frame.add(p3);
		frame.add(p4);
	}
}
