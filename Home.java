import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.regex.*;

public class Home{
	JFrame frame;
	JLabel lbluname,lblpass,lblor,lblmal,lblreg;
	JButton btnlogin,btnreg,btnmal;
	JTextField tfuname;
	JPasswordField tfpass;
	JMenuBar menubar;
	JMenu about,lkfl;
	JMenuItem miabtproject,miabtstudent,miMotif,miNimbus,miCross;
	JPanel p1,p2,p3,p4,p5,p6;
	DBAccess db;
	public Home(){
		super();
	}
	public Home(DBAccess db){
		this.db = db;
		initializeComponents();
		registerListeners();
		addComponentsToFrame();
		frame.setBackground(Color.lightGray);
		frame.setLayout(new GridLayout(6,1)); 
		frame.setSize(450,400);
		frame.setVisible(true);
		frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
	}
	public void initializeComponents(){
		menubar = new JMenuBar();
		
		about = new JMenu("About");
		miabtproject = new JMenuItem("About Project");
		miabtstudent = new JMenuItem("About Student");
		
		lkfl = new JMenu("LAF");
		miMotif = new JMenuItem("Motif");
		miNimbus = new JMenuItem("Nimbus");
		miCross = new JMenuItem("Cross Platform");
		
		frame = new JFrame("Malware counterfeit");
		
		lblmal = new JLabel("Malware Counterfeit");
		lbluname = new JLabel("Username: ");
		tfuname = new JTextField(12);
		
		lblpass = new JLabel("Password: ");
		tfpass = new JPasswordField(12);
		
		btnlogin = new JButton("Login");
		
		lblreg = new JLabel("Not registered? ");
		btnreg = new JButton("Register");
		
		lblor = new JLabel("or");
		btnmal = new JButton("Malware Counterfeit");
		
		p1 = new JPanel();
		p2 = new JPanel();
		p3 = new JPanel();
		p4 = new JPanel();
		p5 = new JPanel();
		p6 = new JPanel();
	}
	public void registerListeners(){
		btnlogin.addActionListener(new ActionListener(){
			public void actionPerformed(ActionEvent ae){
				String inpass = db.getPass(tfuname.getText());
				if(inpass.equals(String.valueOf(tfpass.getPassword()))){
					JOptionPane.showMessageDialog(frame, "Login Successfull.","INFORMATION", JOptionPane.INFORMATION_MESSAGE);
					frame.dispose();
					db.enterLogin(tfuname.getText(),String.valueOf(tfpass.getPassword()));
					new Operations(tfuname.getText(),db);
				}
				else if(inpass.equals(null)){
					JOptionPane.showMessageDialog(frame, "You are not registerd.\nPlease register to login.","INFORMATION", JOptionPane.INFORMATION_MESSAGE);
					
				}
				else{
					JOptionPane.showMessageDialog(frame,"Incorrect Password.\nEnter again.","INFORMATION", JOptionPane.INFORMATION_MESSAGE);
					tfpass.setText(null);
				}
			}
		});
		btnmal.addActionListener(new ActionListener(){
			public void actionPerformed(ActionEvent ae){
				frame.dispose();
				new MalwareDetails(db);
			}
		});
		btnreg.addActionListener(new ActionListener(){
			public void actionPerformed(ActionEvent ae){
				frame.dispose();
				new Registration(db);
			}
		});
		miabtproject.addActionListener (new ActionListener () {
			public void actionPerformed(ActionEvent e) {
				JOptionPane.showMessageDialog(frame, "Project Name: Malware Counterfeit\nDetails: This Project describes about the differenct types \nof software malwares present and their effects caused by \ntheir their presence amd ways to counterfeit it.","INFORMATION", JOptionPane.INFORMATION_MESSAGE);
			}
		});
		miabtstudent.addActionListener (new ActionListener () {
			public void actionPerformed(ActionEvent e) {
				JOptionPane.showMessageDialog(frame, "Name of Student: R. Sai Sathvik\nRoll number: 1602-20-737-035\nMain purpose of project: To implement a 1-Tier Architecture java application","INFORMATION", JOptionPane.INFORMATION_MESSAGE);
			}
		});
		miMotif.addActionListener(new ActionListener()
		{
			public void actionPerformed(ActionEvent evt) 
			{
				try{
					UIManager.setLookAndFeel("com.sun.java.swing.plaf.motif.MotifLookAndFeel");
					SwingUtilities.updateComponentTreeUI(frame);
				}
				catch(ClassNotFoundException|InstantiationException|IllegalAccessException|UnsupportedLookAndFeelException ex)
				{}
			}
		});
	
		miNimbus.addActionListener(new ActionListener()
		{
			public void actionPerformed(ActionEvent evt) 
			{
				try{
					UIManager.setLookAndFeel("javax.swing.plaf.nimbus.NimbusLookAndFeel");
					SwingUtilities.updateComponentTreeUI(frame);
				}
				catch(ClassNotFoundException|InstantiationException|IllegalAccessException|UnsupportedLookAndFeelException ex)
				{}
			}
		});
	
		miCross.addActionListener(new ActionListener()
		{
			public void actionPerformed(ActionEvent evt) 
			{
				try{
					UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());
					SwingUtilities.updateComponentTreeUI(frame);
				}
				catch(ClassNotFoundException|InstantiationException|IllegalAccessException|UnsupportedLookAndFeelException ex)
				{}
			}
		});
		frame.addWindowListener(new WindowAdapter() {
			public void windowClosing(WindowEvent e) {
				if(db.closeConnection()){
					JOptionPane.showMessageDialog(frame, "You are Exiting and \n Connection is closed successfully.","INFORMATION", JOptionPane.INFORMATION_MESSAGE);;
				}
				System.exit(0);
			}
		});
	}
	public void addComponentsToFrame(){
		about.add(miabtproject);
		about.add(miabtstudent);
		
		lkfl.add(miCross);
		lkfl.add(miMotif);
		lkfl.add(miNimbus);
		
		menubar.add(about);
		menubar.add(lkfl);
		frame.setJMenuBar(menubar);
		
		p1.add(lblmal);
		
		p2.add(lbluname);
		p2.add(tfuname);
		
		p3.add(lblpass);
		p3.add(tfpass);
		
		p4.add(btnlogin);
		
		p5.add(lblreg);
		p5.add(btnreg);
		
		p6.add(lblor);
		p6.add(btnmal);
		
		frame.add(p1);
		frame.add(p2);
		frame.add(p3);
		frame.add(p4);
		frame.add(p5);
		frame.add(p6);
	}
	public static void main(String[] args){
		DBAccess db;
		db = new DBAccess();
		new Home(db);
	}
}
		
	
